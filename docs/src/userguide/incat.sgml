<section id="userguide-incat">
<title>Administering Inca with incat</title>

  <section id="userguide-incat-introduction">
  <title>Introduction</title>
  <para>
  Inca provides a graphical administration tool, named incat, that allows you
  to configure your deployment.  Using incat, you can specify the repositories
  from which Inca should retrieve reporters, the resources where you wish to
  run reporters, and which reporters you wish to run on each resource.
  </para><para>
  The simplest way to run incat is via the inca command line tool: "inca
  start incat".  You can connect incat to a running Inca agent via the
  --agent option, e.g., "inca start incat --agent blue.ufo.edu:5678".
  </para><para>
  As mentioned earlier, you can use the inca command line tool to install a
  default Inca configuration on a resource.  The discussion below describes
  how to use incat to set up the same configuration.
  </para>
  </section>

  <section id="userguide-incat-repos">
  <title>Repositories</title>
  <graphic fileref="figures/ug-incat-repositories.png" align="center"></graphic>
  <para>
  incat begins by showing the panel for Inca reporter repositories.  The three
  sections of this panel display the list of repositiories you've specified,
  the list of reporters contained within those repositories, and property
  information for the currently-selected reporter.  Buttons in the Repositories
  section allow you to add and delete repositories from your list.  If your
  list contains multiple repositories, a checkbox in the Reporters section
  determines whether the reporter list shows reporters from all repositories or
  only from the selected one.  Finally, pressing the Show button in the
  Reporters section will open a text window that contains the source code of
  the currently-selected reporter.
  </para><para>
  The default Inca configuration retrieves reporters from the Inca project
  repository.  To add this repository to your list, press the Add button in the
  Repositories section, enter the URL "http://inca.sdsc.edu/2.0/repository" in
  the pop-up window that appears, then press the OK button.  Within a few
  seconds you should see the repository URL appear in the Repositories list, a
  set of reporters in the Reporters list, and properties for the first reporter
  in the Reporter Properties list.  If you like, you can select reporters in
  the Reporters list and display their source code by pressing the Show button.
  (Double-clicking the name in the reporter list accomplishes the same thing.)
  </para>
  </section>

  <section id="userguide-incat-resources">
  <title>Resources</title>
  <graphic fileref="figures/ug-incat-resource-configuration.png" align="center"></graphic>
  <para>
  Pressing the Resource Configuration tab near the top of the incat window
  takes you to incat's resource specification panel.  Here you can enter and
  edit information about the hosts on which you want Inca to run reporters.
  The sections of this panel show resource groups (sets of hosts) that you've
  defined, a set of macros that you can use when defining reporter series to
  run on a paticular resource, and a list of hosts that are included in the
  selected resource.  Buttons in the Resource Group section allow you to add,
  edit, and delete resource groups, and a similar set in the Macros section
  allow you to add, edit, and delete macros associated with the
  currently-selected resource group.
  </para><para>
  The default Inca configuration defines two resource groups--one that
  specifies the host where the Inca agent is running and a container group that
  can be extended to include both this host and any others that you define.  To
  define these in incat, press the Add button in the Resource Groups section to
  open the resource edit dialog.
  </para>
  <graphic fileref="figures/ug-incat-resource-dialog.png" align="center"></graphic>
  <para>
  In the Group Name text box, enter the name "siteA".  (This name choice is
  arbitrary; "agentHost" or "local" would work just as well.)  In the Members
  text box, enter either "localhost" or the DNS name of the host where the Inca
  agent is running.  The Equivalent checkbox underneath the Members text box
  indicates that Inca should treat the hosts in this group as a single
  resource, only running reporters on one of them.  This is most often useful
  when a single DNS name maps to multiple hosts (e.g., multiple login nodes for
  a batch system).  In this case, leave the box unchecked.
  </para><para>
  Select "local" in the Access Method pull-down list.  This indicates that the
  Inca agent can access this host directly without using through either Globus
  or ssh (i.e., it's the same host where the agent is running).
  </para><para>
  If you enter a path in the Install Directory text box, Inca will install the
  Reporter Manager code for the resource in that directory; otherwise, it will
  use a default path.  Proxy information isn't needed for this resource, so
  leave the other text boxes blank.
  </para><para>
  Press OK to complete entry of this resource.  incat will close the resource
  edit dialog and will display siteA in the Resource Groups section of the
  Resource Configuration panel.
  </para><para>
  Press the Add button again to add a second resource group.  Give this one the
  the name "defaultvo" and enter "siteA" in the Members text box.  This tells
  incat that any hosts in the "siteA" group (localhost, in this case) are also
  part of the defaultvo group.  If you defined other groups, "siteB", "siteC",
  etc., you could include these in defaultvo by listing them in the Members
  text box, separated by spaces.  Press OK to complete entry of this resource.
  Notice that the Members panel lists localhost as a member of both the
  defaultvo and siteA resources.
  </para>
  </section>

  <section id="userguide-incat-suites">
  <title>Suites</title>
  <graphic fileref="figures/ug-incat-suites.png" align="center"></graphic>
  <para>
  Pressing the Suites tab near the top of the incat window takes you to incat's
  suite/series specification panel.  Here you specify the reporters you want to
  run, the resources to run them on, how frequently to run them, and the
  arguments to use when running them.
  </para><para>
  A suite groups a set of reporter series.  Suites are largely a convenience
  for organizing related series, and the decision as to whether to place all
  your series into a single suite or to divide them into multiple suites is up
  to you.  One consideration is that the Inca consumer uses suites as its
  primary structure for organizing the display of reporter results, so
  organizing related series into suites may make the consumer web pages more
  readable.
  </para><para>
  The default Inca configuration defines a single suite named TestSuiteLocal
  that contains eight series.  Press the Add button in the Suites section of
  the panel, enter "TestSuiteLocal" in the pop-up window, then press the OK
  button.  You're now ready to add series to this new suite.  Press the Add
  button in the Series section to open the incat series dialog.
  </para>
  <graphic fileref="figures/ug-incat-series-dialog.png" align="center"></graphic>
  <para>
  The top half of the series dialog contains basic information about reporter
  execution--the name and version of the reporter, the resource to run it on,
  what values to pass in the command line arguments, and how often to run.  For
  this first series, scroll down to select the reporter
  "cluster.math.atlas.version" and leave the Use Latest Version radio button
  selected.  (The other choice, Use Version 1.4 Only, indicates that your
  series would continue to run the same version of the reporter even if an
  updated version became available.)  Because both defaultvo and siteA refer to
  the host where the Inca agent is running, you can select either of them in
  the Resource Group list.  In the Arguments section, leave the cc (compiler)
  argument with its default value, "cc", and leave the dir argument blank,
  which will instruct the reporter to search a set of common directories for
  the atlas installation.  Use the pull-down menu to set the log argument to 3;
  this will cause any error, warning, and system-level log messages generated
  by the reporter to be included in its report.  Finally, use the pull-down
  menus in the frequency section to indicate that the reporter should run every
  10 minutes.  When you do this, the contents in the text box to the right
  changes to "*/10 * * * *".  This is crontab syntax (see the section 5 man
  page) for once every 10 minutes.  If you're familiar with crontab, you can
  enter values in the text box directly rather than using the pull-down menus.
  </para><para>
  The bottom half of the series dialog allows you to supply optional
  customization information for your series.  You can supply a descriptive
  name for your series in the Nickname text box, and the Inca consumer will
  include it as part of its display.  The nickname defaults to the name of the
  reporter; for this series, enter "atlas_version" as the value.  The context
  string allows you to specify how the reporter should be run by entering sh
  code either before or after "cluster.math.atlas.version -args" in the text
  box.  For example, you could run this reporter niced by entering "nice -9 "
  at the beginning of the box.  For this series, leave the text box unchanged.
  The limits section allows you to set CPU time, wall clock time, and memory
  limits on the reporter.  If the reporter exceeds any limits you set, the Inca
  Reporter Manager will terminate its execution and send an error report to the
  Inca Depot.  The bottommost two text boxes in the series dialog allow you to
  test the output of the reporter and send email if the test fails.  This is
  covered in detail below; for this series leave these boxes blank.  Press the
  OK button, and incat will close the series dialog box and add the series to
  the Series list in the suite/series specification panel.
  </para><para>
  The other seven series in default Inca configuration are composed similarly
  to the first one.  Press the Add button in the series section for each of
  them, then set the values in the series dialog as specified in the table
  below.  Set the log argument for each series to 3 and the frequency to 10
  minutes.
  </para>

  <table><title>Default Configuration Series</title>
  <tgroup cols="3">
  <thead>
    <row>
      <entry>Reporter</entry>
      <entry>Nickname</entry>
      <entry>Arguments</entry>
    </row>
  </thead>
  <tbody>
    <row>
      <entry>cluster.compiler.gcc.version</entry>
      <entry>gcc_version</entry>
    </row>
    <row>
      <entry>cluster.security.openssl.version</entry>
      <entry>openssl_version</entry>
    </row>
    <row>
      <entry>cluster.interactive_access.openssh.version</entry>
      <entry>openssh_version</entry>
    </row>
    <row>
      <entry>cluster.interactive_access.openssh.unit</entry>
      <entry>openssh_to_localhost</entry>
      <entry>host: localhost; login: inca</entry>
    </row>
    <row>
      <entry>viz.lib.vtk-nvgl.version</entry>
      <entry>vtk-nvgl_version</entry>
    </row>
    <row>
      <entry>viz.lib.chromium.version</entry>
      <entry>chromium_version</entry>
    </row>
    <row>
      <entry>cluster.compiler.any.unit</entry>
      <entry>java_hello_world</entry>
      <entry>compiler: javac; lang: java</entry>
    </row>
  </tbody>
  </tgroup>
  </table>

  </section>

  <section id="userguide-incat-commits">
  <title>Commiting/Saving</title>
  <para>
  Your Inca deployment configuration is now complete.  At this point, it's a
  good idea to use the Save As option in incat's File menu to write the
  configuration to a file.  That way, you have a local copy of the configuration
  that you can later modify.  The file format is formatted XML; if you're
  curious, you can read through it to see how incat represents the information
  you've entered.
  </para><para>
  Although your configuration is complete, it's not yet active.  To tell Inca
  to begin running reporters, you need to use incat to send your configuration
  to your Inca Agent.  If you started incat with the --agent argument, then
  you're already connected to your Agent.  Otherwise, use the Connect option in
  incat's Agent menu to establish a connection.  Once you're connected, you can
  use the Commit option in the Agent menu to send the configuration to the
  Agent.  In response, the Agent will install the Inca Reporter Manager code on
  its host and begin running the reporters you specified.
  </para>
  </section>

  <section id="userguide-incat-macros">
  <title>Using Resource Macros</title>
  <para>TODO</para>
  </section>

  <section id="userguide-incat-remote">
  <title>Globus and SSH Resources</title>
  <para>TODO</para>
  </section>

  <section id="userguide-incat-proxy">
  <title>Using Proxies</title>
  <para>TODO</para>
  </section>

  <section id="userguide-incat-comparison">
  <title>Series Comparison and Notification</title>
  <para>TODO</para>
  </section>

</section>
