<section id="userguide-consumer">
<title>Inca Web Data Consumer</title>

<para>The data that the Inca depot stores, as with all database data, can be displayed in many ways.  A data consumer is anything that 
retrieves data from the depot and displays it (e.g. a JSP, sql query, CGI, etc.).</para>

<graphic fileref="figures/arch-consumer.jpg" align="center"></graphic>
<para>  Data consumers can query the Inca depot to produce current and historical reports and graphs 
or customized status information.  The Inca depot comes with two pre-defined queries: 
<orderedList>
<listItem>
<para>given instance and config IDs for a series, returns XML like the following (the results from executing
a reporter at a particular point in time)
<screen>&lt;reportDetails&gt; 
  &lt;suiteId&gt;1&lt;/suiteId&gt;
  &lt;seriesConfigId&gt;5&lt;/seriesConfigId&gt;
  &lt;seriesId&gt;5&lt;/seriesId&gt;
  &lt;reportId&gt;1&lt;/reportId&gt;
  &lt;instanceId&gt;73&lt;/instanceId&gt;
  &lt;seriesConfig&gt;
     ...    
    &lt;nickname&gt;java_hello_world&lt;/nickname&gt;     
     ...
  &lt;/seriesConfig&gt;
  &lt;report&gt;
     ...
  &lt;/report&gt;
  &lt;sysusage&gt;
     ...
  &lt;/sysusage&gt;
  &lt;stderr/&gt;
&lt;/reportDetails&gt;</screen>
</para>
</listItem>
<listItem>
<para>given a suite name, returns XML like the following (the latest report summaries for all of the series in the particular suite)
<screen>&lt;reportSummary&gt;
  &lt;hostname&gt;Kate-Ericsons-Computer.local&lt;/hostname&gt;
  &lt;uri&gt;http://repository/compiler.any.unit&lt;/uri&gt;
  &lt;nickname&gt;java_hello_world&lt;/nickname&gt;
  &lt;seriesConfigId&gt;5&lt;/seriesConfigId&gt;
  &lt;instanceId&gt;73&lt;/instanceId&gt;
  &lt;gmt&gt;2006-12-20T16:00:11.000-08:00&lt;/gmt&gt; 
  &lt;body&gt;
    &lt;package&gt;
      &lt;ID&gt;openssl&lt;/ID&gt;
      &lt;version&gt;0.9.7i&lt;/version&gt;
    &lt;/package&gt;  
  &lt;/body&gt;  
&lt;/reportSummary&gt;
&lt;reportSummary&gt;...&lt;/reportSummary&gt;
&lt;reportSummary&gt;...&lt;/reportSummary&gt;</screen>
</para>
</listItem>
</orderedList>
</para>
<screen>&lt;resources&gt;
  &lt;resource&gt;    
    &lt;name&gt;siteA&lt;/name&gt;    
    &lt;macros&gt;      
      &lt;macro&gt;
        &lt;name&gt;__regexp__&lt;/name&gt;
        &lt;value&gt;Kate-Ericsons-Computer.local&lt;/value&gt;
      &lt;/macro&gt;    
    &lt;/macros&gt;
  &lt;/resource&gt;
&lt;/resources&gt;</screen>
<graphic fileref="figures/consumer-editxml.jpg" align="center"></graphic>



</section>
