<section id="userguide-advanced-config">
<title>Advanced Configuration</title>

<para>This section will describe advanced configuration options (e.g. 
installing components in non-default 
locations, changing inca.properties and other defaults).</para>

<section id="comp-options">
<title>Inca Component Options</title>
<para>Each inca component has a set of options that can be set in either the $INCA_DIST/etc/common/inca.properties file or from the command line.  The inca.properties file has a list of name value pairs of the format "inca.component.property=value".  For example, to start the consumer on port 8082 instead of 8080 and enter the password on the command line rather than get it from standard in, you could: </para>
<orderedList>
<listItem>
<para>edit $INCA_DIST/etc/common/inca.properties and replace:</para>
<itemizedList>
<listItem>
<para>"#inca.consumer.port=8080" with "inca.consumer.port=8082"</para>
</listItem>
<listItem><para>"inca.consumer.password=stdin:password>" with "inca.consumer.password=pass:<emphasis role="red">&lt;password&gt;</emphasis>" (where &lt;password&gt; is the password set with the createauth command)</para> 
</listItem>
</itemizedList>
</listItem>
<listItem>
<para><emphasis role="red">OR</emphasis> execute the following command:
<screen>% cd $INCA_DIST; ./bin/inca start consumer -p 8082 -P pass:<emphasis role="red">&lt;password&gt;</emphasis></screen>
</para>
</listItem>
</orderedList>

<para>Man pages with component options are described in <xref linkend="userguide-man">.</para> 
</section>

<section id="postgres">
<title>Using Postgres as DB Backend</title>
<itemizedList>
<listItem>
<para>Stop the depot 
<screen>% cd $INCA_DIST; ./bin/inca stop depot</screen>
</para>
</listItem>

<listItem>
<para>Edit $INCA_DIST/etc/hibernate.properties</para>
<itemizedList>
<listItem>
<para>
Comment out the first 5 lines which specifies for hibernate to use 
hsql as its backend database: 
<screen>#hibernate.dialect=org.hibernate.dialect.HSQLDialect 
#hibernate.connection.driver_class=org.hsqldb.jdbcDriver 
#hibernate.connection.url=jdbc:hsqldb:test 
#hibernate.connection.username=sa 
#hibernate.connection.password=
</screen>
</para>
</listItem>
<listItem>
<para>
Uncomment the second block of lines 8-13 which specifies for 
hibernate to use postgres:
<screen># Settings for a local PostgreSQL database. 
hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect 
hibernate.query.substitutions=yes 'Y', no 'N' 
hibernate.connection.driver_class=org.postgresql.Driver 
hibernate.connection.url=jdbc:postgresql:test 
hibernate.connection.username=test 
hibernate.connection.password=
</screen>
</para>
</listItem>
<listItem>
<para>
Replace the value "jdbc:postgresql:test" for property 
"hibernate.connection.url" on line 11 with the following (where "hostname" is 
the FQDN of the host where postgres is installed and "username" is the username to 
connect to the postgres DB):
<screen>hibernate.connection.url=jdbc:postgresql://hostname/username</screen>
</para>
</listItem>
<listItem>
<para>
Replace the value "test" for property 
"hibernate.connection.username" on line 12 with the postgres 
username:
<screen>hibernate.connection.username=username</screen>
</para>
</listItem>
</itemizedList>
</listItem>

<listItem>
<para>
Download the postgres jdbc jar file pg74.216.jdbc3.jar 
to your $INCA_DIST/lib directory:
<screen>% cd $INCA_DIST/lib 
% wget http://inca.sdsc.edu/workshop/pg74.216.jdbc3.jar 
</screen>
</para>
</listItem>

<listItem>
<para>
Initialize the depot (set up the Inca tables):
<screen>% cd $INCA_DIST; ./bin/inca depot -d</screen>
You should see something like:
<screen>Initializing c3p0 pool... 
... 
Database Initialization Completed</screen>
</para>
</listItem>

<listItem>
<para>Start the depot 
<screen>% ./bin/inca start depot</screen>
</para>
</listItem>
</itemizedList>


</section>

</section>
